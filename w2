-- Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Config
local WORLD_NAME = "Seven Seas"
local MAX_ATTEMPTS = 5
local RETRY_DELAY = 2

-- LocalData
local LocalData = require(
    ReplicatedStorage
        :WaitForChild("Client")
        :WaitForChild("Framework")
        :WaitForChild("Services")
        :WaitForChild("LocalData")
)

-- RemoteEvent
local RemoteEvent = ReplicatedStorage
    :WaitForChild("Shared")
    :WaitForChild("Framework")
    :WaitForChild("Network")
    :WaitForChild("Remote")
    :WaitForChild("RemoteEvent")

-- Check function
local function isWorldUnlocked()
    local data = LocalData:Get()
    if not data or not data.WorldsUnlocked then
        return false
    end
    return data.WorldsUnlocked[WORLD_NAME] == true
end

-- Main logic
task.spawn(function()
    -- Already unlocked
    if isWorldUnlocked() then
        print("[SUCCESS] Seven Seas is already unlocked")
        return
    end

    -- Try unlocking
    for attempt = 1, MAX_ATTEMPTS do
        print("[INFO] Attempt " .. attempt .. " to unlock Seven Seas")
        RemoteEvent:FireServer("UnlockWorld", WORLD_NAME)
        task.wait(RETRY_DELAY)

        if isWorldUnlocked() then
            print("[SUCCESS] Seven Seas unlocked")
            return
        end
    end

    -- Failed
    print("[FAIL] Seven Seas could not be unlocked after " .. MAX_ATTEMPTS .. " attempts")
end)
