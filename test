local Player = game.Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 500, 0, 400)
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

local LoadingFrame = Instance.new("Frame")
LoadingFrame.Size = UDim2.new(1, 0, 1, 0)
LoadingFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
LoadingFrame.Parent = MainFrame

local LoadingLabel = Instance.new("TextLabel")
LoadingLabel.Size = UDim2.new(1, 0, 0, 50)
LoadingLabel.Position = UDim2.new(0, 0, 0.5, -25)
LoadingLabel.Text = "Loading..."
LoadingLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
LoadingLabel.TextScaled = true
LoadingLabel.BackgroundTransparency = 1
LoadingLabel.Parent = LoadingFrame

local AuctionFrame = Instance.new("Frame")
AuctionFrame.Size = UDim2.new(1, 0, 1, 0)
AuctionFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
AuctionFrame.Visible = false
AuctionFrame.Parent = MainFrame

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(1, -20, 0, 50)
TitleLabel.Position = UDim2.new(0, 10, 0, 10)
TitleLabel.Text = "Which Auction do you want to Choose?"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextScaled = true
TitleLabel.BackgroundTransparency = 1
TitleLabel.Parent = AuctionFrame

local SearchBox = Instance.new("TextBox")
SearchBox.Size = UDim2.new(1, -20, 0, 40)
SearchBox.Position = UDim2.new(0, 10, 0, 70)
SearchBox.PlaceholderText = "Search Auctions..."
SearchBox.Text = ""
SearchBox.TextColor3 = Color3.fromRGB(255, 255, 255)
SearchBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
SearchBox.Parent = AuctionFrame

local ListFrame = Instance.new("ScrollingFrame")
ListFrame.Size = UDim2.new(1, -20, 1, -150)
ListFrame.Position = UDim2.new(0, 10, 0, 120)
ListFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ListFrame.ScrollBarThickness = 6
ListFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
ListFrame.Parent = AuctionFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Parent = ListFrame

local ConfirmButton = Instance.new("TextButton")
ConfirmButton.Size = UDim2.new(0, 150, 0, 50)
ConfirmButton.Position = UDim2.new(0.5, -75, 1, -60)
ConfirmButton.Text = "Confirm"
ConfirmButton.TextScaled = true
ConfirmButton.BackgroundColor3 = Color3.fromRGB(50, 150, 50)
ConfirmButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ConfirmButton.Parent = AuctionFrame

local Modules = require(game:GetService("ReplicatedStorage"):WaitForChild("Modules"))
local Garages = Modules.Garages

local auctionButtons = {}

for name, garage in pairs(Garages) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -10, 0, 40)
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Text = name
    btn.Parent = ListFrame
    table.insert(auctionButtons, btn)
end

UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    ListFrame.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y)
end)

local function filterAuctions(text)
    text = text:lower()
    for _, btn in pairs(auctionButtons) do
        btn.Visible = btn.Text:lower():find(text) ~= nil
    end
end

SearchBox:GetPropertyChangedSignal("Text"):Connect(function()
    filterAuctions(SearchBox.Text)
end)

local selectedAuction = nil
for _, btn in pairs(auctionButtons) do
    btn.MouseButton1Click:Connect(function()
        selectedAuction = btn.Text
        for _, b in pairs(auctionButtons) do
            b.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        end
        btn.BackgroundColor3 = Color3.fromRGB(100, 100, 200)
    end)
end

ConfirmButton.MouseButton1Click:Connect(function()
    if selectedAuction then
        print("Selected Auction: "..selectedAuction)
    end
end)

task.delay(2, function()
    LoadingFrame.Visible = false
    AuctionFrame.Visible = true
end)
