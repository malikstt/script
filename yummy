repeat task.wait() until game:IsLoaded()
local lp = game.Players.LocalPlayer
repeat task.wait() until lp:FindFirstChild("PlayerGui")
task.wait(math.random(0,3000)/1000)

local g = lp.PlayerGui:FindFirstChild("ScreenGui")
if g and g:FindFirstChild("DailyRewards") then
    g.DailyRewards:Destroy()
end
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer
local VirtualInputManager = game:GetService("VirtualInputManager")

local lastSummonTime = 0
local COOLDOWN_DURATION = 30 * 60

local summonArgs = {
    "SummonRift",
    {
        Name = "royal-chest",
        Type = "Chest",
        Time = 5,
        World = "The Overworld"
    }
}

local function executeSummon()
    if os.time() - lastSummonTime < COOLDOWN_DURATION then
        return false
    end
    
    local success = pcall(function()
        ReplicatedStorage.Shared.Framework.Network.Remote.RemoteFunction:InvokeServer(unpack(summonArgs))
    end)
    
    if success then
        lastSummonTime = os.time()
        return true
    end
    return false
end

local function getChest()
    return workspace:FindFirstChild("Rendered")
    and workspace.Rendered:FindFirstChild("Rifts")
    and workspace.Rendered.Rifts:FindFirstChild("royal-chest")
    and workspace.Rendered.Rifts["royal-chest"]:FindFirstChild("Chest")
    and workspace.Rendered.Rifts["royal-chest"].Chest:FindFirstChild("royal-chest")
end

local function teleportToChest()
    local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local hrp = character:WaitForChild("HumanoidRootPart")
    local chest = getChest()

    if chest then
        hrp.CFrame = chest.CFrame * CFrame.new(0, 0, 5)
        return true
    end
    return false
end

local function spamRE()
    while true do
        if getChest() then
            VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.R, false, game)
            VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.R, false, game)
            VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.E, false, game)
            VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.E, false, game)
        else
            break
        end
        wait(0.1)
    end
end

while true do
    if not getChest() then
        local summoned = executeSummon()
        if summoned then
            wait(3)
        end
    end

    if getChest() then
        if teleportToChest() then
            spamRE()
        end
    end

    wait(5)
end
