_G.Config = {
    UserID = "3087df52-2f5c-4e6f-a407-10fa72d16932",
    discord_id = "1135837863603351573",
    Note = "Pc"
}

task.spawn(function()
    local s
    for i = 1, 5 do
        s = pcall(function()
            loadstring(game:HttpGet("https://cdn.yummydata.click/scripts/bgsi"))()
        end)
        if s then break end
        task.wait(5)
    end

    getgenv().waitTime = 2.5
getgenv().giftsToOpen = {
    "Admin Mystery Box",
    "OG Mystery Box",
}

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Remote = require(ReplicatedStorage.Shared.Framework.Network.Remote)
local PhysicalItem = require(ReplicatedStorage.Client.Effects.PhysicalItem)
local LocalDataModule = require(ReplicatedStorage.Client.Framework.Services.LocalData)
function getLocalData()
    return LocalDataModule:Get()
end

getgenv().oldGift = getgenv().oldGift or PhysicalItem.Gift
PhysicalItem.Gift = function(giftId, giftType, giftPosition)
    if not getgenv().autoGift then return getgenv().oldGift(giftId, giftType, giftPosition) end

    task.spawn(function()
        pcall(function()
            Remote:FireServer("ClaimGift", giftId)
        end)
    end)

    return nil
end

getgenv().autoGift = not getgenv().autoGift

getgenv().popUpConnection = getgenv().popUpConnection or nil
local genericFolder = workspace.Rendered:FindFirstChild("Generic")
if getgenv().autoGift then
    if genericFolder and not popUpConnection then
        popUpConnection = genericFolder.ChildAdded:Connect(function(item)
            if item:IsA("Part") and #item.Name == 36 then item:Destroy() end
        end)
    end
else
    if popUpConnection then popUpConnection:Disconnect(); popUpConnection = nil end
end

Remote:FireServer("SetSetting","Item Notifications",false)

task.spawn(function()
    if getgenv().autoGift then
        for _, gift in pairs(getgenv().giftsToOpen) do
            while getgenv().autoGift do
                local am = getLocalData().Powerups[gift] or 0
                if am > 0 then
                    Remote:FireServer("UseGift", gift, (am > 25 and 25) or am)
                    task.wait(getgenv().waitTime)
                else
                    break
                end
            end
        end
    end
end)

local Config = {
    PetsToEquip = {"Hot Dog Doggy", "Maid Nert Plushie"},
    CheckDelay = 1,
    EquipDelay = 0.5
}

local Network = ReplicatedStorage.Shared.Framework.Network.Remote.RemoteEvent
local LocalData = require(ReplicatedStorage.Client.Framework.Services.LocalData)

local function shouldEquip(name)
    for _, n in ipairs(Config.PetsToEquip) do
        if name == n then
            return true
        end
    end
    return false
end

task.spawn(function()
    while task.wait(Config.CheckDelay) do
        local data = LocalData:Get()
        if not data or not data.Pets then continue end

        local equipped = {}
        if data.Teams and data.TeamEquipped then
            local team = data.Teams[data.TeamEquipped]
            if team and team.Pets then
                for _, id in ipairs(team.Pets) do
                    equipped[id] = true
                end
            end
        end

        for _, pet in pairs(data.Pets) do
            if shouldEquip(pet.Name) then
                if not equipped[pet.Id] then
                    Network:FireServer("EquipPet", pet.Id)
                    task.wait(Config.EquipDelay)
                end
            else
                if equipped[pet.Id] then
                    Network:FireServer("UnequipPet", pet.Id)
                    task.wait(Config.EquipDelay)
                end
            end
        end
    end
end)

task.spawn(function()
    task.wait(30)

    local RS = game:GetService("ReplicatedStorage")
    local RemoteEvent = RS.Shared.Framework.Network.Remote.RemoteEvent
    local LocalData2 = require(RS.Client.Framework.Services.LocalData)
    local target = "secret-hunter"
    local done = {}

    while true do
        local data = LocalData2:Get()
        if data and data.Teams and data.TeamEquipped then
            local team = data.Teams[data.TeamEquipped]
            if team and team.Pets then
                for _, petId in ipairs(team.Pets) do
                    if not done[petId] then
                        local pet
                        for _, p in ipairs(data.Pets or {}) do
                            if p.Id == petId then pet = p break end
                        end
                        if pet then
                            local has = false
                            for _, e in ipairs(pet.Enchants or {}) do
                                if e.Id == target then has = true break end
                            end
                            if has then
                                done[petId] = true
                            else
                                RemoteEvent:FireServer("UseShadowCrystal", petId)
                            end
                        end
                    end
                    task.wait(0.1)
                end
            end
        end
        task.wait(0.1)
    end
end)
