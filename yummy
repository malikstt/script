repeat task.wait() until game:IsLoaded()
local lp = game.Players.LocalPlayer
repeat task.wait() until lp:FindFirstChild("PlayerGui")
task.wait(math.random(0,3000)/1000)

local g = lp.PlayerGui:FindFirstChild("ScreenGui")
if g and g:FindFirstChild("DailyRewards") then
    g.DailyRewards:Destroy()
end
require(game:GetService("ReplicatedStorage").Client.Effects.HatchEgg).Play = function() return end

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local VirtualUser = game:GetService("VirtualUser")
local workspace = game:GetService("Workspace")
local Lighting = game:GetService("Lighting")

local LocalPlayer = Players.LocalPlayer
local targetCFrame = CFrame.new(80.23, 9.60, -13.15)

if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
    LocalPlayer.Character.HumanoidRootPart.CFrame = targetCFrame
end

RunService.Heartbeat:Connect(function()
    VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.E, false, nil)
    task.wait(0.05)
    VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.E, false, nil)
end)

local keep = {}
local a = workspace.Egg.EggPlatformSpawn:GetChildren()[2]
local b = workspace.Rendered.Generic["Winter Egg"].Decoration["Meshes/Winter Egg_Plane.002"]

keep[a] = true
keep[b] = true

local function collectAncestors(o)
    while o and o ~= workspace do
        keep[o] = true
        o = o.Parent
    end
end

collectAncestors(a)
collectAncestors(b)

local function tag(o)
    keep[o] = true
    for _, v in ipairs(o:GetDescendants()) do
        keep[v] = true
    end
end

tag(a)
tag(b)

for _, v in ipairs(workspace:GetDescendants()) do
    if not keep[v] then
        pcall(function() v:Destroy() end)
    end
end

pcall(function() workspace.Terrain:Clear() end)

for _, v in ipairs(workspace:GetDescendants()) do
    if v:IsA("BasePart") then
        pcall(function()
            v.CanCollide = false
            v.CanTouch = false
            v.CanQuery = false
            v.CastShadow = false
            v.Massless = true
        end)
    end
end

for _, v in ipairs(game.ReplicatedStorage:GetDescendants()) do
    pcall(function() v:Destroy() end)
end

for _, v in ipairs(workspace:GetDescendants()) do
    if v:IsA("ParticleEmitter") or v:IsA("Beam") or v:IsA("Trail") or v:IsA("Attachment") then
        pcall(function() v:Destroy() end)
    end
end

for _, v in ipairs(workspace:GetDescendants()) do
    if v:IsA("Sound") then
        pcall(function() v:Destroy() end)
    end
end

for _, v in ipairs(Lighting:GetChildren()) do
    pcall(function() v:Destroy() end)
end

pcall(function()
    Lighting.GlobalShadows = false
    Lighting.Brightness = 0
    Lighting.FogEnd = 9e9
    Lighting.EnvironmentSpecularScale = 0
    Lighting.EnvironmentDiffuseScale = 0
end)

pcall(function()
    settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
    settings().Rendering.MeshPartDetailLevel = Enum.MeshPartDetailLevel.Level01
    settings().Rendering.EagerBulkExecution = false
end)

pcall(function()
    local PhysicsService = game:GetService("PhysicsService")
    if PhysicsService.SetPerformanceThrottle then
        PhysicsService:SetPerformanceThrottle(1)
    end
    workspace.PhysicsSteppingMethod = Enum.PhysicsSteppingMethod.Fixed
    workspace.SignalBehavior = Enum.SignalBehavior.Deferred
end)

local cam = workspace.CurrentCamera
pcall(function()
    cam.CameraType = Enum.CameraType.Scriptable
    cam.CFrame = CFrame.new(0, 0, 0)
end)

if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
    LocalPlayer.Character.HumanoidRootPart.CFrame = a.CFrame
end

RunService.Heartbeat:Connect(function()
    VirtualUser:Button1Down(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
    task.wait(0.1)
    VirtualUser:Button1Up(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
end)

if LocalPlayer.Character then
    LocalPlayer.Character:BreakJoints()
end

for _, v in ipairs(LocalPlayer.PlayerGui:GetChildren()) do
    pcall(function() v:Destroy() end)
end

for _, v in ipairs(LocalPlayer.PlayerScripts:GetChildren()) do
    pcall(function() v:Destroy() end)
end
