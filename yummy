local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
if player.Character then
    player.Character:PivotTo(CFrame.new(108.36, 9.49, 238.35))
end

local Network = ReplicatedStorage.Shared.Framework.Network.Remote.RemoteEvent
local LocalData = require(ReplicatedStorage.Client.Framework.Services.LocalData)

Network:FireServer("SetSetting", "Item Notifications", false)

task.spawn(function()
    while true do
        local ok, data = pcall(function() return LocalData:Get() end)
        if ok and data and data.Pets then
            local equipped = {}
            if data.Teams and data.TeamEquipped then
                local team = data.Teams[data.TeamEquipped]
                if team and team.Pets then
                    for _, id in ipairs(team.Pets) do
                        equipped[id] = true
                    end
                end
            end
            for _, pet in pairs(data.Pets) do
                if pet.Name == "Fox O' Wisp" then
                    if not equipped[pet.Id] then
                        Network:FireServer("EquipPet", pet.Id)
                        task.wait(0.1)
                    end
                elseif equipped[pet.Id] then
                    Network:FireServer("UnequipPet", pet.Id)
                    task.wait(0.1)
                end
            end
        end
        task.wait(5)
    end
end)

task.spawn(function()
    local remotes = ReplicatedStorage.Remotes.Pickups.CollectPickup
    local claimed = {}
    while true do
        local children = Workspace.Rendered:GetChildren()
        local target = children[14]
        if target then  
            for _, obj in ipairs(target:GetChildren()) do  
                local id = obj.Name  
                if not claimed[id] then  
                    claimed[id] = true  
                    pcall(function()  
                        remotes:FireServer(id)  
                        obj:Destroy()  
                    end)  
                end  
            end  
        end  
        task.wait(0.1)
    end
end)

task.spawn(function()
    while true do
        Network:FireServer("UseGift", "Fall Mystery Box", 25)
        task.wait(0.5)
        local rendered = Workspace.Rendered
        if rendered then
            local giftsFolder = rendered.Gifts
            if giftsFolder then
                for _, gift in pairs(giftsFolder:GetChildren()) do
                    if gift:IsA("Model") or gift:IsA("Part") then
                        Network:FireServer("ClaimGift", gift.Name)
                        gift:Destroy()
                    end
                end
            end
        end
        task.wait(0.5)
    end
end)

task.spawn(function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/malikstt/script/refs/heads/main/optimization"))()
end)
