repeat task.wait() until game:IsLoaded()
local lp = game.Players.LocalPlayer
repeat task.wait() until lp:FindFirstChild("PlayerGui")
task.wait(math.random(0,3000)/1000)

local g = lp.PlayerGui:FindFirstChild("ScreenGui")
if g and g:FindFirstChild("DailyRewards") then
    g.DailyRewards:Destroy()
end
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer
local VirtualInputManager = game:GetService("VirtualInputManager")

local lastSummonTime = 0
local COOLDOWN_DURATION = 30 * 60

local chests = {
    {Name = "royal-chest", Type = "Chest", Time = 5, World = "The Overworld"},
    {Name = "super-chest", Type = "Chest", Time = 5, World = "The Overworld"} -- time updated to 5
}

local function executeSummon()
    if os.time() - lastSummonTime < COOLDOWN_DURATION then
        return false
    end

    local chestToSummon = chests[math.random(1, #chests)]

    local summonArgs = {
        "SummonRift",
        chestToSummon
    }

    local success = pcall(function()
        ReplicatedStorage.Shared.Framework.Network.Remote.RemoteFunction:InvokeServer(unpack(summonArgs))
    end)

    if success then
        lastSummonTime = os.time()
        return true
    end
    return false
end

local function getChest()
    local rendered = workspace:FindFirstChild("Rendered")
    if not rendered then return nil end
    local rifts = rendered:FindFirstChild("Rifts")
    if not rifts then return nil end

    for _, chestInfo in ipairs(chests) do
        local chestRift = rifts:FindFirstChild(chestInfo.Name)
        if chestRift and chestRift:FindFirstChild("Chest") and chestRift.Chest:FindFirstChild(chestInfo.Name) then
            return chestRift.Chest[chestInfo.Name], chestInfo.Name
        end
    end

    return nil, nil
end

local function teleportToChest()
    local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local hrp = character:WaitForChild("HumanoidRootPart")
    local chest, chestName = getChest()

    if chest then
        if chestName == "super-chest" then
            hrp.CFrame = chest.CFrame * CFrame.new(0, 5, 0) -- teleport slightly above
        else
            hrp.CFrame = chest.CFrame * CFrame.new(0, 0, 5)
        end
        return true
    end
    return false
end

local function spamRE()
    while true do
        if getChest() then
            VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.R, false, game)
            VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.R, false, game)
            VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.E, false, game)
            VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.E, false, game)
        else
            break
        end
        wait(0.1)
    end
end

while true do
    if not getChest() then
        local summoned = executeSummon()
        if summoned then
            wait(3)
        end
    end

    if getChest() then
        if teleportToChest() then
            spamRE()
        end
    end

    wait(5)
end
