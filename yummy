task.spawn(function()
    while true do
        local args = { "EquipBestPets" }
        game:GetService("ReplicatedStorage")
            :WaitForChild("Shared")
            :WaitForChild("Framework")
            :WaitForChild("Network")
            :WaitForChild("Remote")
            :WaitForChild("RemoteEvent")
            :FireServer(unpack(args))

        task.wait(60)
    end
end)
task.spawn(function()
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local LocalData = require(ReplicatedStorage.Client.Framework.Services.LocalData)

    local RemoteEvent = ReplicatedStorage
        :WaitForChild("Shared")
        :WaitForChild("Framework")
        :WaitForChild("Network")
        :WaitForChild("Remote")
        :WaitForChild("RemoteEvent")

    local function getSeason()
        local d = LocalData:Get()
        return d and d.Season
    end

    local function fire(remote, reason)
        print("[SEASON]", remote, "|", reason)
        RemoteEvent:FireServer(remote)
    end

    print("[SEASON] Auto-claimer started")

    local lastPoints
    local infiniteFired = false
    local stopped = false

    while not stopped do
        local s = getSeason()
        if not s then
            task.wait(1)
            continue
        end

        if not lastPoints then
            lastPoints = s.Points
            print("[SEASON] Init | Level =", s.Level, "Points =", s.Points, "IsInfinite =", s.IsInfinite)
            task.wait(0.5)
            continue
        end

        -- Infinite trigger (one-time)
        if s.Level == 15 and not s.IsInfinite and not infiniteFired then
            fire("BeginSeasonInfinite", "Level 15 reached")
            infiniteFired = true
        end

        -- Points trigger → always try claim
        if s.Points > lastPoints then
            local beforeLevel = s.Level
            fire("ClaimSeason", "Points increased (" .. lastPoints .. " → " .. s.Points .. ")")
            task.wait(0.8)

            local after = getSeason()
            if after then
                -- stop ONLY before infinite
                if not after.IsInfinite and after.Level == beforeLevel then
                    print("[SEASON] Claim failed before Infinite → STOPPING")
                    break
                end

                if after.Level > beforeLevel then
                    print("[SEASON] Level up:", beforeLevel, "→", after.Level)
                end
            end
        end

        lastPoints = s.Points
        task.wait(0.5)
    end
end)
getgenv().waitTime = 2.5
getgenv().autoGift = true

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

local Network = ReplicatedStorage.Shared.Framework.Network.Remote.RemoteEvent
local Remote = require(ReplicatedStorage.Shared.Framework.Network.Remote)
local PhysicalItem = require(ReplicatedStorage.Client.Effects.PhysicalItem)
local LocalData = require(ReplicatedStorage.Client.Framework.Services.LocalData)

getgenv().oldGift = getgenv().oldGift or PhysicalItem.Gift
PhysicalItem.Gift = function(giftId, giftType, giftPosition)
    if not getgenv().autoGift then
        return getgenv().oldGift(giftId, giftType, giftPosition)
    end
    task.spawn(function()
        pcall(function()
            Remote:FireServer("ClaimGift", giftId)
        end)
    end)
    return nil
end

local genericFolder = Workspace:FindFirstChild("Rendered") and Workspace.Rendered:FindFirstChild("Generic")
if genericFolder then
    genericFolder.ChildAdded:Connect(function(item)
        if item:IsA("Part") and #item.Name == 36 then
            item:Destroy()
        end
    end)
end

Remote:FireServer("SetSetting","Item Notifications",false)

Network:FireServer(
    "Teleport",
    "Workspace.Worlds.Minigame Paradise.Islands.Hyperwave Island.Island.Portal.Spawn"
)

for _, world in pairs(Workspace.Worlds:GetChildren()) do
    if world.Name ~= "Minigame Paradise" then
        world:Destroy()
    end
end

task.wait(30)

task.spawn(function()
    while true do
        local data = LocalData:Get()
        if data and data.Powerups and (data.Powerups["Mystery Box"] or 0) > 0 then
            Remote:FireServer("UseGift","Mystery Box",50)
        end
        task.wait(getgenv().waitTime)
    end
end)

task.spawn(function()
    while true do
        task.wait(10)
        local data = LocalData:Get()
        if data and data.Pets then
            local ids = {}
            for _, pet in pairs(data.Pets) do
                if pet.Id then
                    table.insert(ids, pet.Id)
                end
            end
            if #ids > 0 then
                Network:FireServer("ChoosePiece", ids[math.random(#ids)])
            end
        end
        task.wait(120)
    end
end)

task.spawn(function()
    while true do
        Network:FireServer("GumShopPurchase","Void Gum")
        task.wait(1140)
    end
end)
