local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

local function convertToRiftName(name)
    return name:gsub(" ", "-"):lower()
end

local function riftExists(name)
    local riftName = convertToRiftName(name)
    if Workspace:FindFirstChild("Rendered") and Workspace.Rendered:FindFirstChild("Rifts") then
        for _, rift in pairs(Workspace.Rendered.Rifts:GetChildren()) do
            if rift.Name == riftName then
                return true
            end
        end
    end
    return false
end

local function executeSummon(world)
    local args = {
        "SummonRift",
        {
            Type = "Egg",
            Time = 5,
            Name = RIFT_EGG,
            Luck = 5,
            World = world
        }
    }
    pcall(function()
        ReplicatedStorage.Shared.Framework.Network.Remote.RemoteFunction:InvokeServer(unpack(args))
    end)
end

if AUTO_SUMMON then
    task.spawn(function()
        while true do
            if not riftExists(RIFT_EGG) then
                task.wait(math.random(1, 10))
                if not riftExists(RIFT_EGG) then
                    executeSummon("Minigame Paradise")
                    task.wait(math.random(2, 5))
                    executeSummon("The Overworld")
                end
            end
            task.wait(math.random(1, 60))
        end
    end)
end
