local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Window = Rayfield:CreateWindow({Name = "Pro Spammer"})

local Players = game:GetService("Players")
local Remote = game:GetService("ReplicatedStorage").Shared.Framework.Network.Remote.RemoteEvent

local trading = false
local delayTime = 0.4
local selectedNames = {}

local function GetSortedPlayers()
    local list = {}
    for _, v in pairs(Players:GetPlayers()) do
        if v ~= Players.LocalPlayer then
            table.insert(list, v.Name)
        end
    end
    table.sort(list, function(a, b)
        local aNum = a:match("^[0-9]")
        local bNum = b:match("^[0-9]")
        if aNum and not bNum then return true end
        if bNum and not aNum then return false end
        return a:lower() < b:lower()
    end)
    return list
end

local MainTab = Window:CreateTab("Main")

local Dropdown = MainTab:CreateDropdown({
    Name = "Select Target(s)",
    Options = GetSortedPlayers(),
    MultipleOptions = true,
    Callback = function(options)
        selectedNames = options or {}
    end
})

MainTab:CreateInput({
    Name = "Delay (sec)",
    PlaceholderText = tostring(delayTime),
    Callback = function(text)
        delayTime = tonumber(text) or 0.4
    end
})

MainTab:CreateToggle({
    Name = "Start Trading",
    Callback = function(value)
        trading = value
        if trading then
            task.spawn(function()
                while trading do
                    for _, name in ipairs(selectedNames) do
                        if not trading then break end
                        local plr = Players:FindFirstChild(name)
                        if plr then
                            Remote:FireServer("TradeRequest", plr)
                            task.wait(delayTime)
                        end
                    end
                    task.wait(delayTime)
                end
            end)
        end
    end
})

local function RefreshDropdown()
    Dropdown:Refresh(GetSortedPlayers())
end

Players.PlayerAdded:Connect(RefreshDropdown)
Players.PlayerRemoved:Connect(RefreshDropdown)
