local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

local label = player:WaitForChild("PlayerGui")
    :WaitForChild("ScreenGui")
    :WaitForChild("HUD")
    :WaitForChild("Left")
    :WaitForChild("Currency")
    :WaitForChild("Leaves")
    :WaitForChild("Frame")
    :WaitForChild("Label")

local areaMin = Vector3.new(20, 9.20, 180)
local areaMax = Vector3.new(90, 9.20, 270)
local homePos = Vector3.new(62.35, 9.20, 186.15)

local function sendWebhook(username, amount)
    if WEBHOOK_URL == "" then return end
    local data = {
        ["embeds"] = {{
            ["title"] = "Leaves Update",
            ["description"] = "Username: **" .. username .. "**\nLeaves: **" .. amount .. "**",
            ["color"] = 65280
        }}
    }
    local json = HttpService:JSONEncode(data)
    local request = http_request or request or HttpPost or syn.request
    if request then
        request({
            Url = WEBHOOK_URL,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = json
        })
    end
end

local function tweenTo(pos)
    local tween = TweenService:Create(
        hrp,
        TweenInfo.new(TWEEN_TIME, Enum.EasingStyle.Linear),
        {CFrame = CFrame.new(pos)}
    )
    tween:Play()
    tween.Completed:Wait()
end

local function spinWheel()
    local rf = ReplicatedStorage.Shared.Framework.Network.Remote.RemoteFunction
    local re = ReplicatedStorage.Shared.Framework.Network.Remote.RemoteEvent
    rf:InvokeServer("AutumnWheelSpin")
    task.wait(0.5)
    re:FireServer("ClaimAutumnWheelSpinQueue")
end

local function buyAutumnShop()
    local re = ReplicatedStorage.Shared.Framework.Network.Remote.RemoteEvent
    for i = 1, 5 do
        re:FireServer("BuyShopItem","autumnnorm-shop",1,false)
        re:FireServer("BuyShopItem","autumnnorm-shop",2,false)
        re:FireServer("BuyShopItem","autumnnorm-shop",3,false)
    end
end

task.spawn(function()
    while true do
        local randX = math.random(areaMin.X, areaMax.X)
        local randZ = math.random(areaMin.Z, areaMax.Z)
        local pos = Vector3.new(randX, areaMin.Y, randZ)
        tweenTo(pos)
        tweenTo(homePos)
    end
end)

task.spawn(function()
    while task.wait(INTERVAL_CHECK) do
        sendWebhook(player.Name, label.Text)
    end
end)

task.spawn(function()
    while AUTO_SPIN_WHEEL do
        spinWheel()
        task.wait(AUTO_SPIN_EVERY)
    end
end)

task.spawn(function()
    while AUTO_AUTUMN_SHOP do
        buyAutumnShop()
        task.wait(300)
    end
end)

loadstring(game:HttpGet("https://raw.githubusercontent.com/malikstt/script/refs/heads/main/optimization"))()
