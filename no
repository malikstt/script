local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

local folder = workspace:WaitForChild("Debris"):WaitForChild("Snowflakes")

-- UI
local gui = Instance.new("ScreenGui")
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local label = Instance.new("TextLabel")
label.Size = UDim2.new(0, 500, 0, 50)
label.Position = UDim2.new(0.5, -250, 0, 10)
label.BackgroundTransparency = 0.3
label.BackgroundColor3 = Color3.fromRGB(0,0,0)
label.TextColor3 = Color3.fromRGB(255,255,255)
label.TextScaled = true
label.Font = Enum.Font.GothamBold
label.Parent = gui

-- Collect hearts
local function getHearts()
    local hearts = {}
    for _, v in pairs(folder:GetChildren()) do
        if v.Name == "DroppedHeart" and v:IsA("BasePart") then
            table.insert(hearts, v)
        end
    end
    return hearts
end

-- Sort by distance
local function sortByDistance(hearts)
    table.sort(hearts, function(a, b)
        return (hrp.Position - a.Position).Magnitude <
               (hrp.Position - b.Position).Magnitude
    end)
end

-- Tween function
local function tweenTo(target)
    local distance = (hrp.Position - target.Position).Magnitude
    local speed = 120 -- studs per second
    local time = distance / speed

    local tween = TweenService:Create(
        hrp,
        TweenInfo.new(time, Enum.EasingStyle.Sine, Enum.EasingDirection.Out),
        {CFrame = target.CFrame + Vector3.new(0,3,0)}
    )

    tween:Play()

    -- update distance live
    while tween.PlaybackState == Enum.PlaybackState.Playing do
        local distLeft = (hrp.Position - target.Position).Magnitude
        label.Text = "Niggas collected: " .. collected .. 
                     " | Distance to next nigger: " .. math.floor(distLeft)
        task.wait()
    end
end

-- Main loop
collected = 0

while true do
    local hearts = getHearts()

    if #hearts == 0 then
        label.Text = "No nigga found"
        break
    end

    sortByDistance(hearts)

    for _, heart in ipairs(hearts) do
        if heart and heart.Parent then
            tweenTo(heart)
            collected += 1
            task.wait(0.1)
        end
    end

    task.wait(1)
end
