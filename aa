local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

local LocalData
pcall(function()
	LocalData = require(ReplicatedStorage.Client.Framework.Services.LocalData)
end)

local potionName = "Infinity Elixir"
local startTime = os.clock()

local gui = Instance.new("ScreenGui")
gui.Name = "InfinityElixirUI"
gui.ResetOnSpawn = false
gui.Parent = player.PlayerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.fromOffset(200,200)
frame.Position = UDim2.fromScale(0.5,0.5)
frame.AnchorPoint = Vector2.new(0.5,0.5)
frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
frame.Parent = gui

Instance.new("UICorner",frame).CornerRadius = UDim.new(0,12)

local function mkLabel(y,size,font)
	local l = Instance.new("TextLabel")
	l.Size = UDim2.new(1,-20,0,size)
	l.Position = UDim2.fromOffset(10,y)
	l.BackgroundTransparency = 1
	l.TextColor3 = Color3.new(1,1,1)
	l.Font = font
	l.TextSize = size
	l.Parent = frame
	return l
end

local topBar = mkLabel(6,18,Enum.Font.GothamBold)
topBar.Text = "üß™      "..player.Name.."      ‚è≥"

local potionLabel = mkLabel(38,20,Enum.Font.GothamBold)
potionLabel.Text = potionName

local timeLabel = mkLabel(70,32,Enum.Font.GothamBold)
timeLabel.Text = "?"

local amountTitle = mkLabel(118,14,Enum.Font.Gotham)
amountTitle.Text = "Amount in Inventory"

local amountLabel = mkLabel(138,16,Enum.Font.GothamBold)
amountLabel.Text = "( ? )"

local runtimeLabel = mkLabel(158,14,Enum.Font.Gotham)
runtimeLabel.TextColor3 = Color3.fromRGB(200,200,200)

local bottomDecor = mkLabel(176,16,Enum.Font.Gotham)
bottomDecor.TextColor3 = Color3.fromRGB(180,180,180)
bottomDecor.Text = "üß™      ‚è≥      üß™"

local function updateAmount()
	if not LocalData then return end
	local data = LocalData:Get()
	if not data or not data.Potions then return end
	for _, pot in pairs(data.Potions) do
		if type(pot)=="table" and pot.Name==potionName then
			amountLabel.Text="( "..tostring(pot.Amount).." )"
			return
		end
	end
end

local function updateTime()
	local sg = player.PlayerGui:FindFirstChild("ScreenGui")
	if not sg then return end
	local buffs = sg:FindFirstChild("Buffs")
	if not buffs then return end
	local potion = buffs:FindFirstChild(potionName)
	if not potion then return end
	local label = potion:FindFirstChild("Button")
	label = label and label:FindFirstChild("Label")
	if not label then return end

	local txt = label.Text:lower()
	local d = txt:match("(%d+)%s*d")
	local h = txt:match("(%d+)%s*h")

	if d then
		timeLabel.Text = d.." days"
	elseif h then
		timeLabel.Text = h.." hours"
	end
end

RunService.Heartbeat:Connect(function()
	updateTime()
	updateAmount()

	local rt = math.floor(os.clock()-startTime)
	local m = math.floor(rt/60)
	local s = rt%60
	runtimeLabel.Text = "Runtime: "..m.."m "..s.."s"
end)
