local Network = require(game.ReplicatedStorage.Modules.Network)
local Replication = require(game.ReplicatedStorage.Game.Replication)
local Marketplace = require(game:GetService("ReplicatedStorage").Game.Marketplace)
local ExclusiveEggs = require(game:GetService("Players").LocalPlayer.PlayerScripts.Modules.Controllers["Exclusive Eggs"])

local productsToBuy = { "ChronosEgg10", "ChronosEgg3", "ChronosEgg1" } -- put it in order you wanna buy nigger

local products = {}

-- im getting prices automatically for you nigger 
for _, product in pairs(productsToBuy) do
    if Marketplace.Products[product] then
        products[product] = Marketplace.Products[product].TokenPrice
    end
end

pcall(function()
    local tokens = Replication.Data.Items.Tokens
    for _, product in ipairs(productsToBuy) do
        local price = products[product] or 9e9
        while tokens >= price do
            local success, err, reward =
                Network:InvokeServer("PurchaseProductWithTokens", product)
            warn(success, err, reward)
            task.wait(1)
            tokens = Replication.Data.Items.Tokens
        end
    end
end)


local anyHatch = false

while true do
    warn("running")
    for egg, am in pairs(Replication.Data.Eggs) do 
        warn(egg, am)
        local currentHatch = (am >= 3 and 3) or (am >= 1 and 1) or 0 
        warn(currentHatch)
        if currentHatch == 0 then 
            continue
        end
        ExclusiveEggs:OpenExclusiveEgg(egg, currentHatch)
        anyHatch = true
        task.wait(1)
    end
    if not anyHatch then break end
    anyHatch = false
end
