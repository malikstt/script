local datamodule = require(game:GetService("ReplicatedStorage").Client.Framework.Services.LocalData)
local data = datamodule:Get()

local Remote = game:GetService("ReplicatedStorage")
    :WaitForChild("Shared")
    :WaitForChild("Framework")
    :WaitForChild("Network")
    :WaitForChild("Remote")
    :WaitForChild("RemoteEvent")

task.spawn(function()
    for Item, Amount in pairs(data.Powerups) do
        -- Only process items with "Egg" in the name
        if Item:match("Egg") then
            -- Skip if more than 100k
            if Amount > 100000 then
                continue
            end

            if Amount > 12 then
                local Times = math.floor(Amount / 12)
                for i = 1, Times do
                    Remote:FireServer("HatchPowerupEgg", Item, 12)
                    task.wait(0.75)
                end
                local Remaining = Amount % 12
                if Remaining > 0 then
                    Remote:FireServer("HatchPowerupEgg", Item, Remaining)
                end
                task.wait(2)
            elseif Amount > 0 then
                Remote:FireServer("HatchPowerupEgg", Item, Amount)
            end
        end
    end
end)
