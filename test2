for _,x in pairs(getconnections(game.Players.LocalPlayer.Idled)) do
    x:Disable()
end

local Players = game:GetService("Players")
local lp = Players.LocalPlayer

local function getRoot()
    local c = lp.Character or lp.CharacterAdded:Wait()
    return c:WaitForChild("HumanoidRootPart")
end

local Points = {
    CFrame.new(-2605.55,20.60,1115.76),
    CFrame.new(-2710.46,32.90,1190.03),
    CFrame.new(-2598.21,21.22,1069.86),
    CFrame.new(-2447.21,31.83,972.24),
    CFrame.new(-2519.26,20.82,1066.89),
    CFrame.new(-2414.90,31.83,1000.79),
    CFrame.new(-2674.88,32.52,1214.75),
    CFrame.new(-2710.10,32.12,1163.05),
    CFrame.new(-2422.10,31.83,974.31)
}

local function ensure()
    local root = getRoot()
    local char = root.Parent
    local hum = char:FindFirstChildOfClass("Humanoid")
    if not hum then
        repeat task.wait() until char:FindFirstChildOfClass("Humanoid")
        hum = char:FindFirstChildOfClass("Humanoid")
    end
    return root, hum
end

local function sweepTouch(cf)
    local root, hum = ensure()
    local b = cf.Position

    local xs, zs = {-2,0,2}, {-2,0,2}
    local ys_under, ys_over = {-6,-4,-2}, {1,3,5}

    local t = 0
    local function step(w)
        task.wait(w)
        t += w
        return t >= 1.3
    end

    for _,y in ipairs(ys_under) do
        for _,x in ipairs(xs) do
            for _,z in ipairs(zs) do
                root.CFrame = CFrame.new(b.X+x,b.Y+y,b.Z+z)
                root.AssemblyLinearVelocity = Vector3.new(0,50,0)
                if hum then pcall(function() hum:MoveTo(b+Vector3.new(x,y+1,z)) end) end
                if step(0.10) then return end
            end
        end
    end

    for _,y in ipairs(ys_over) do
        for _,x in ipairs(xs) do
            for _,z in ipairs(zs) do
                root.CFrame = CFrame.new(b.X+x,b.Y+y,b.Z+z)
                root.AssemblyLinearVelocity = Vector3.new(0,-80,0)
                if hum then pcall(function() hum:MoveTo(b+Vector3.new(x,y-1,z)) end) end
                if step(0.10) then return end
            end
        end
    end

    for i=1,2 do
        root.CFrame = CFrame.new(b.X,b.Y+2,b.Z)
        root.AssemblyLinearVelocity = Vector3.new(0,-150,0)
        if step(0.07) then return end

        root.CFrame = CFrame.new(b.X,b.Y-2,b.Z)
        root.AssemblyLinearVelocity = Vector3.new(0,150,0)
        if step(0.07) then return end
    end

    for _,off in ipairs({
        Vector3.new(0,0,0),
        Vector3.new(1,0,0),
        Vector3.new(-1,0,0),
        Vector3.new(0,0,1),
        Vector3.new(0,0,-1)
    }) do
        if hum then
            pcall(function() hum:MoveTo(b+off) end)
            pcall(function() hum:ChangeState(Enum.HumanoidStateType.Running) end)
        end
        if step(0.10) then return end
    end
end

task.spawn(function()
    task.wait(1)
    while true do
        for _,cf in ipairs(Points) do
            sweepTouch(cf)
        end
    end
end)
